<html>
  <head>
    <link rel="stylesheet" href="./index.css">
  </head>
  <body>
    <h3 id="status"> Tic Tac </h3>
    <div class="container">
      <div class="row">
        <div class="column overlay" id="0">
        </div>
        <div class="column overlay" id="1">
        </div>
        <div class="column overlay" id="2">
        </div>
      </div>
      <div class="row">
        <div class="column overlay" id="3">
        </div>
        <div class="column overlay" id="4">
        </div>
        <div class="column overlay" id="5">
        </div>
      </div>
      <div class="row">
        <div class="column overlay" id="6">
        </div>
        <div class="column overlay" id="7">
        </div>
        <div class="column overlay" id="8">
        </div>
      </div>
    </div>
    <button id='start'>Start Game</button>

    <script type='text/javascript'>
      // js equivalent? $(document).ready(function() {
      // just put script tag at end of page....
        let gameBoard, currentPlayer
        let over = true
        const statusEl = document.getElementById('status')

        const startGame = (event) => {
          gameBoard = ['','','','','','','','','']
          currentPlayer = 'X'
          over = false
          statusEl.textContent = "Tic Tac"
          const squares = document.getElementsByClassName('column')
          for (let i = 0; i < squares.length; i++) {
            squares[i].setAttribute('class', 'column overlay')
            squares[i].textContent = ''
            squares[i].addEventListener('click', onSquareClick)
          }
        }
        document.getElementById('start').addEventListener('click', startGame)

        const drawGame = gameBoard => gameBoard.every(value => value !== '')

        const winConditions = () => [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[2,4,6],[0,4,8]]

        const winGame = (gameBoard, player) => {
          const indexesOfPlayer = gameBoard.map((piece, i) => piece === player ? i : null)
            .filter(val => val !== null)
          return winConditions().some(combo => combo.every(i => indexesOfPlayer.includes(i)))
        }

        const onSquareClick = function(event) {
          let lastPlayer;
          if (!over) {
            event.target.textContent = currentPlayer
            event.target.setAttribute('class','column')
            gameBoard[event.target.id] = currentPlayer
            if (winGame(gameBoard, currentPlayer) || drawGame(gameBoard)) {
              over = true
              statusEl.textContent = `${currentPlayer} wins!!!`
            }
            lastPlayer = currentPlayer
            currentPlayer = currentPlayer === 'X' ? 'O' : 'X'
          }
        }
    </script>
  </body>
</html>
